<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin ‚Ä¢ Uƒçebn√≠ kamar√°d</title>
  <link rel="stylesheet" href="./admin.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">üõ†Ô∏è Admin ‚Ä¢ Uƒçebn√≠ kamar√°d</div>
    <div class="right">
      <span id="env-badge" class="badge">offline</span>
      <button id="btn-logout" class="ghost small" title="Odhl√°sit">Odhl√°sit</button>
    </div>
  </header>

  <!-- GATE: token login -->
  <section id="gate" class="centered">
    <div class="card narrow">
      <h1>P≈ôihl√°≈°en√≠</h1>
      <p class="muted">Zadej <strong>ADMIN_TOKEN</strong>. Token se ulo≈æ√≠ jen do tohoto prohl√≠≈æeƒçe.</p>
      <label>Admin token
        <input id="token-input" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off" />
      </label>
      <div class="row">
        <label class="row"><input id="show-token" type="checkbox" /> Zobrazit</label>
      </div>
      <label>API Base (voliteln√©)
        <input id="api-base" type="text" placeholder="nap≈ô. https://app.vercel.app" />
      </label>
      <div class="row end">
        <button id="btn-login" class="cta">P≈ôihl√°sit</button>
      </div>
      <div id="gate-status" class="status"></div>
    </div>
  </section>

  <!-- APP -->
  <main id="app" class="hidden">
    <nav class="tabs">
      <button data-tab="config" class="active">Konfigurace agenta</button>
      <button data-tab="lists">Seznamy (obsah)</button>
      <button data-tab="diag">Diagnostika</button>
    </nav>

    <!-- CONFIG TAB -->
    <section id="tab-config" class="tab active">
      <div class="grid two">
        <div class="card">
          <h2>agent.json</h2>
          <div class="toolbar">
            <button id="json-format" class="ghost small">Form√°tovat</button>
            <button id="json-validate" class="ghost small">Validovat</button>
            <button id="json-download" class="ghost small">St√°hnout</button>
            <label class="ghost small file">Nahr√°t
              <input id="json-upload" type="file" accept="application/json,.json" />
            </label>
          </div>
          <textarea id="agent-json" spellcheck="false" class="mono" rows="20" placeholder='{"model":"gpt-4o-mini","temperature":0.4,"name":"K√°ja","persona":"trpƒõliv√Ω kamar√°d"}'></textarea>
        </div>
        <div class="card">
          <h2>agent.md</h2>
          <div class="toolbar">
            <button id="md-download" class="ghost small">St√°hnout</button>
            <label class="ghost small file">Nahr√°t
              <input id="md-upload" type="file" accept="text/markdown,.md,.txt" />
            </label>
          </div>
          <textarea id="agent-md" spellcheck="false" class="mono" rows="20" placeholder="# Styl a pravidla agenta\n- p≈ô√≠vƒõtiv√Ω t√≥n\n- jednoduch√° slova\n- kr√°tk√© vƒõty\n"></textarea>
        </div>
      </div>
      <div class="row end gap">
        <button id="config-load" class="ghost">Naƒç√≠st z /api/config</button>
        <button id="config-save" class="cta">Ulo≈æit do /api/config</button>
      </div>
      <div id="config-status" class="status"></div>
    </section>

    <!-- LISTS TAB -->
    <section id="tab-lists" class="tab">
      <div class="grid two">
        <div class="card">
          <h2>Vyjmenovan√° slova</h2>
          <p class="muted">Buƒè JSON pole, nebo ka≈æd√© slovo na nov√Ω ≈ô√°dek.</p>
          <textarea id="vyj-text" rows="14" spellcheck="false" class="mono" placeholder="b√Ωt\nbydlet\nmyslivec\nobyvatel"></textarea>
        </div>
        <div class="card">
          <h2>English list (en/cs)</h2>
          <p class="muted">JSON pole objekt≈Ø: <code>{"en":"cat","cs":"koƒçka"}</code>. Pokud <code>cs</code> vynech√°≈°, backend je dopln√≠ automaticky.</p>
          <textarea id="en-json" rows="14" spellcheck="false" class="mono" placeholder='[{"en":"cat"},{"en":"dog"},{"en":"book"}]'></textarea>
          <div class="row gap">
            <button id="en-format" class="ghost small">Form√°tovat</button>
            <button id="en-validate" class="ghost small">Validovat</button>
          </div>
        </div>
      </div>
      <div class="row gap wrap">
        <button id="lists-load" class="ghost">Naƒç√≠st z /api/lists</button>
        <button id="lists-save" class="cta">Ulo≈æit do /api/lists</button>
        <button id="lists-download" class="ghost">St√°hnout JSON</button>
        <label class="ghost file">Nahr√°t JSON
          <input id="lists-upload" type="file" accept="application/json,.json" />
        </label>
      </div>
      <div id="lists-status" class="status"></div>
    </section>

    <!-- DIAG TAB -->
    <section id="tab-diag" class="tab">
      <div class="card">
        <h2>Ping a kontrola endpoint≈Ø</h2>
        <div class="grid two">
          <div>
            <button class="ghost" data-ping="/api/config">GET /api/config</button>
            <button class="ghost" data-ping="/api/lists">GET /api/lists</button>
            <button class="ghost" data-ping="/api/progress?userId=test">GET /api/progress?userId=test</button>
          </div>
          <div>
            <button class="ghost" id="btn-clear-cache">Vymazat localStorage</button>
            <button class="ghost" id="btn-copy-curl">Zkop√≠rovat cURL pro /api/lists POST</button>
          </div>
        </div>
        <pre id="diag-output" class="mono scroll"></pre>
      </div>
    </section>
  </main>

  <script src="./admin.js" type="module"></script>
</body>
</html>
